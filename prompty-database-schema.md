# Prompty ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ å®Œå…¨è§£èª¬æ›¸

## æ¦‚è¦

**Prompty**ã¯ã€AIãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å…±æœ‰ãƒ»è²©å£²ã™ã‚‹ãŸã‚ã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€Supabaseã‚’åŸºç›¤ã¨ã—ãŸåŒ…æ‹¬çš„ãªãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆã«ã¤ã„ã¦è©³ç´°ã«è§£èª¬ã—ã¾ã™ã€‚

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: PostgreSQL 15.8.1
- **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID**: qrxrulntwojimhhhnwqk
- **ãƒªãƒ¼ã‚¸ãƒ§ãƒ³**: ap-northeast-1
- **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: ACTIVE_HEALTHY

---

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å…¨ä½“æ§‹é€ 

```mermaid
graph TB
    subgraph "èªè¨¼ã‚·ã‚¹ãƒ†ãƒ  (auth)"
        A1[users]
        A2[sessions]
        A3[identities]
        A4[refresh_tokens]
    end
    
    subgraph "ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç† (public)"
        B1[profiles]
        B2[user_settings]
        B3[account_settings]
        B4[notification_preferences]
    end
    
    subgraph "ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†"
        C1[prompts]
        C2[drafts]
        C3[categories]
        C4[tags]
        C5[prompt_tags]
    end
    
    subgraph "ã‚½ãƒ¼ã‚·ãƒ£ãƒ«æ©Ÿèƒ½"
        D1[likes]
        D2[comments]
        D3[bookmarks]
        D4[follows]
        D5[notifications]
    end
    
    subgraph "æ±ºæ¸ˆã‚·ã‚¹ãƒ†ãƒ "
        E1[payments]
        E2[purchases]
        E3[subscriptions]
        E4[payment_methods]
        E5[payouts]
    end
    
    A1 --> B1
    B1 --> C1
    C1 --> D1
    C1 --> D2
    B1 --> E2
```

---

## ğŸ” èªè¨¼ã‚·ã‚¹ãƒ†ãƒ  (auth schema)

### 1. users ãƒ†ãƒ¼ãƒ–ãƒ«
**ç›®çš„**: Supabaseèªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã®ã‚³ã‚¢ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±

| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | èª¬æ˜ |
|---------|---------|------|
| `id` | uuid | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä¸€æ„è­˜åˆ¥å­ï¼ˆãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼ï¼‰ |
| `email` | varchar | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ |
| `encrypted_password` | varchar | æš—å·åŒ–ã•ã‚ŒãŸãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ |
| `email_confirmed_at` | timestamptz | ãƒ¡ãƒ¼ãƒ«ç¢ºèªæ—¥æ™‚ |
| `created_at` | timestamptz | ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆæ—¥æ™‚ |
| `updated_at` | timestamptz | æœ€çµ‚æ›´æ–°æ—¥æ™‚ |
| `is_super_admin` | boolean | ã‚¹ãƒ¼ãƒ‘ãƒ¼ç®¡ç†è€…ãƒ•ãƒ©ã‚° |
| `is_sso_user` | boolean | SSOçµŒç”±ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ©ã‚° |
| `is_anonymous` | boolean | åŒ¿åãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ©ã‚° |

**é–¢é€£æ€§**: 
- `profiles` ãƒ†ãƒ¼ãƒ–ãƒ«ã¨1:1é–¢ä¿‚
- å…¨ã¦ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼é–¢é€£ãƒ†ãƒ¼ãƒ–ãƒ«ã®åŸºç‚¹

### 2. sessions ãƒ†ãƒ¼ãƒ–ãƒ«
**ç›®çš„**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†

| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | èª¬æ˜ |
|---------|---------|------|
| `id` | uuid | ã‚»ãƒƒã‚·ãƒ§ãƒ³è­˜åˆ¥å­ |
| `user_id` | uuid | é–¢é€£ãƒ¦ãƒ¼ã‚¶ãƒ¼ID |
| `created_at` | timestamptz | ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹æ™‚åˆ» |
| `updated_at` | timestamptz | æœ€çµ‚ã‚¢ã‚¯ã‚»ã‚¹æ™‚åˆ» |
| `aal` | aal_level | èªè¨¼ä¿è¨¼ãƒ¬ãƒ™ãƒ« |
| `not_after` | timestamptz | ã‚»ãƒƒã‚·ãƒ§ãƒ³æœ‰åŠ¹æœŸé™ |
| `user_agent` | text | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæƒ…å ± |
| `ip` | inet | IPã‚¢ãƒ‰ãƒ¬ã‚¹ |

### 3. identities ãƒ†ãƒ¼ãƒ–ãƒ«
**ç›®çš„**: å¤–éƒ¨ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ï¼ˆGoogleã€Appleç­‰ï¼‰ã®èªè¨¼æƒ…å ±ç®¡ç†

| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | èª¬æ˜ |
|---------|---------|------|
| `id` | uuid | ã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£è­˜åˆ¥å­ |
| `user_id` | uuid | é–¢é€£ãƒ¦ãƒ¼ã‚¶ãƒ¼ID |
| `provider` | text | ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼åï¼ˆgoogleã€appleç­‰ï¼‰ |
| `provider_id` | text | ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼å´ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ID |
| `identity_data` | jsonb | ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‹ã‚‰å–å¾—ã—ãŸè©³ç´°æƒ…å ± |
| `email` | text | ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼ˆç”Ÿæˆã‚«ãƒ©ãƒ ï¼‰ |

---

## ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 

### 4. profiles ãƒ†ãƒ¼ãƒ–ãƒ«
**ç›®çš„**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¬é–‹ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±

| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | èª¬æ˜ | åˆ¶ç´„ |
|---------|---------|------|-----|
| `id` | uuid | ãƒ¦ãƒ¼ã‚¶ãƒ¼IDï¼ˆauth.usersã¨é€£æºï¼‰ | PRIMARY KEY |
| `username` | varchar | ãƒ¦ãƒ¼ã‚¶ãƒ¼å | UNIQUE, 3æ–‡å­—ä»¥ä¸Š |
| `display_name` | varchar | è¡¨ç¤ºå | |
| `email` | varchar | å…¬é–‹ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ | UNIQUE |
| `bio` | text | è‡ªå·±ç´¹ä»‹æ–‡ | |
| `avatar_url` | text | ã‚¢ãƒã‚¿ãƒ¼ç”»åƒURL | |
| `banner_url` | text | ãƒãƒŠãƒ¼ç”»åƒURL | |
| `website` | varchar | ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆURL | |
| `github` | varchar | GitHubã‚¢ã‚«ã‚¦ãƒ³ãƒˆ | |
| `location` | varchar | æ‰€åœ¨åœ° | |
| `is_premium` | boolean | ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ä¼šå“¡ãƒ•ãƒ©ã‚° | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: false |
| `premium_until` | timestamptz | ãƒ—ãƒ¬ãƒŸã‚¢ãƒ æœŸé™ | |
| `is_business` | boolean | ãƒ“ã‚¸ãƒã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ•ãƒ©ã‚° | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: false |
| `stripe_account_id` | text | Stripeã‚¢ã‚«ã‚¦ãƒ³ãƒˆé€£æºID | |
| `status` | text | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | |

**ç‰¹å¾´**:
- RLSï¼ˆRow Level Securityï¼‰æœ‰åŠ¹
- å®Ÿãƒ‡ãƒ¼ã‚¿: 17ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²æ¸ˆã¿

### 5. user_settings ãƒ†ãƒ¼ãƒ–ãƒ«
**ç›®çš„**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è©³ç´°è¨­å®šç®¡ç†

| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ | èª¬æ˜ |
|---------|---------|-------------|------|
| `id` | uuid | - | è¨­å®šID |
| `user_id` | uuid | - | ãƒ¦ãƒ¼ã‚¶ãƒ¼IDï¼ˆUNIQUEï¼‰ |
| `account_settings` | jsonb | è¤‡é›‘ãªJSONBæ§‹é€  | ã‚¢ã‚«ã‚¦ãƒ³ãƒˆé–¢é€£è¨­å®š |
| `notification_settings` | jsonb | è¤‡é›‘ãªJSONBæ§‹é€  | é€šçŸ¥è¨­å®š |
| `reaction_settings` | jsonb | è¤‡é›‘ãªJSONBæ§‹é€  | ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³è¨­å®š |
| `comment_settings` | jsonb | è¤‡é›‘ãªJSONBæ§‹é€  | ã‚³ãƒ¡ãƒ³ãƒˆè¨­å®š |

**JSONBãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è©³ç´°**:

#### account_settings
```json
{
  "use_mincho_font": false,
  "social_connections": {
    "apple": false,
    "google": false,
    "twitter": false
  },
  "accept_tip_payments": true,
  "is_business_account": false,
  "restrict_ai_learning": false,
  "add_mention_when_shared": true,
  "show_recommended_articles": true,
  "invoice_registration_number": null,
  "display_account_on_creator_page": true,
  "allow_introduction_on_official_sns": true,
  "allow_purchase_by_non_registered_users": true
}
```

#### notification_settings
```json
{
  "push_notifications": {
    "likes": true,
    "follows": true,
    "comments": true,
    "mentions": true,
    "new_posts": true,
    "reactions": true
  },
  "email_notifications": {
    "likes": true,
    "follows": true,
    "comments": true,
    "mentions": true,
    "new_posts": true,
    "reactions": true,
    "newsletter": true,
    "promotions": true
  }
}
```

### 6. account_settings ãƒ†ãƒ¼ãƒ–ãƒ«
**ç›®çš„**: ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ¬ãƒ™ãƒ«ã®åŸºæœ¬è¨­å®š

| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|---------|---------|-----------|------|
| `user_id` | uuid | - | ãƒ¦ãƒ¼ã‚¶ãƒ¼IDï¼ˆUNIQUEï¼‰ |
| `show_creator_page` | boolean | true | ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼ãƒšãƒ¼ã‚¸è¡¨ç¤º |
| `add_mentions_on_share` | boolean | true | ã‚·ã‚§ã‚¢æ™‚ãƒ¡ãƒ³ã‚·ãƒ§ãƒ³è¿½åŠ  |
| `allow_reposts` | boolean | true | ãƒªãƒã‚¹ãƒˆè¨±å¯ |
| `show_recommended_creators` | boolean | true | ãŠã™ã™ã‚ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼è¡¨ç¤º |
| `use_serif_font` | boolean | false | ã‚»ãƒªãƒ•ãƒ•ã‚©ãƒ³ãƒˆä½¿ç”¨ |
| `accept_tips` | boolean | true | ãƒãƒƒãƒ—å—ã‘å–ã‚Šè¨±å¯ |
| `allow_anonymous_purchase` | boolean | true | åŒ¿åè³¼å…¥è¨±å¯ |
| `opt_out_ai_training` | boolean | false | AIå­¦ç¿’ãƒ‡ãƒ¼ã‚¿ä½¿ç”¨æ‹’å¦ |

---

## ğŸ“ ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 

### 7. prompts ãƒ†ãƒ¼ãƒ–ãƒ«
**ç›®çš„**: ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼‰ç®¡ç†

| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | åˆ¶ç´„ | èª¬æ˜ |
|---------|---------|-----------|-----|------|
| `id` | uuid | gen_random_uuid() | PRIMARY KEY | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆID |
| `author_id` | uuid | - | NOT NULL, FOREIGN KEY | ä½œæˆè€…ID |
| `title` | varchar | - | 5æ–‡å­—ä»¥ä¸Š | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¿ã‚¤ãƒˆãƒ« |
| `description` | text | - | | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆèª¬æ˜ |
| `content` | text | - | 10æ–‡å­—ä»¥ä¸Š | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæœ¬æ–‡ |
| `thumbnail_url` | text | - | | ã‚µãƒ ãƒã‚¤ãƒ«ç”»åƒURL |
| `category_id` | uuid | - | FOREIGN KEY | ã‚«ãƒ†ã‚´ãƒªID |
| `price` | numeric | 0 | | ä¾¡æ ¼ï¼ˆå††ï¼‰ |
| `currency` | text | 'jpy' | | é€šè²¨ |
| `is_free` | boolean | true | | ç„¡æ–™ãƒ•ãƒ©ã‚° |
| `is_featured` | boolean | false | | æ³¨ç›®ãƒ•ãƒ©ã‚° |
| `is_premium` | boolean | false | | ãƒ—ãƒ¬ãƒŸã‚¢ãƒ é™å®šãƒ•ãƒ©ã‚° |
| `published` | boolean | true | | å…¬é–‹ãƒ•ãƒ©ã‚° |
| `view_count` | integer | 0 | | é–²è¦§æ•° |
| `like_count` | smallint | 0 | | ã„ã„ã­æ•° |
| `preview_lines` | integer | 3 | 1-20 | æœ‰æ–™è¨˜äº‹ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡Œæ•° |
| `ai_model` | varchar | - | | ä½¿ç”¨AIãƒ¢ãƒ‡ãƒ«å |
| `media_type` | varchar | 'image' | | ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¿ã‚¤ãƒ—ï¼ˆimage/videoï¼‰ |
| `stripe_product_id` | text | - | | Stripeå•†å“ID |
| `stripe_price_id` | text | - | | Stripeä¾¡æ ¼ID |

**ç‰¹å¾´**:
- å®Ÿãƒ‡ãƒ¼ã‚¿: 20ä»¶ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
- RLSæœ‰åŠ¹ã§ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç¢ºä¿
- Stripeé€£æºã«ã‚ˆã‚‹æ±ºæ¸ˆæ©Ÿèƒ½

### 8. drafts ãƒ†ãƒ¼ãƒ–ãƒ«
**ç›®çš„**: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ä¸‹æ›¸ãç®¡ç†

| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | èª¬æ˜ |
|---------|---------|------|
| `id` | uuid | ä¸‹æ›¸ãID |
| `author_id` | uuid | ä½œæˆè€…ID |
| `title` | varchar | ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆnullableã§ä½œæˆé€”ä¸­ã‚‚ä¿å­˜å¯èƒ½ï¼‰ |
| `description` | text | èª¬æ˜ |
| `content` | text | æœ¬æ–‡ |
| `thumbnail_url` | text | ã‚µãƒ ãƒã‚¤ãƒ« |
| `category_id` | uuid | ã‚«ãƒ†ã‚´ãƒªID |
| `price` | numeric | ä¾¡æ ¼ |
| `is_free` | boolean | ç„¡æ–™ãƒ•ãƒ©ã‚° |

### 9. categories ãƒ†ãƒ¼ãƒ–ãƒ«
**ç›®çš„**: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ã‚«ãƒ†ã‚´ãƒªéšå±¤ç®¡ç†

| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | åˆ¶ç´„ | èª¬æ˜ |
|---------|---------|-----|------|
| `id` | uuid | PRIMARY KEY | ã‚«ãƒ†ã‚´ãƒªID |
| `name` | text | NOT NULL | ã‚«ãƒ†ã‚´ãƒªå |
| `slug` | text | UNIQUE | URLã‚¹ãƒ©ãƒƒã‚° |
| `description` | text | | ã‚«ãƒ†ã‚´ãƒªèª¬æ˜ |
| `icon` | text | | ã‚¢ã‚¤ã‚³ãƒ³ |
| `parent_id` | uuid | FOREIGN KEY | è¦ªã‚«ãƒ†ã‚´ãƒªIDï¼ˆéšå±¤æ§‹é€ ï¼‰ |
| `created_by` | uuid | FOREIGN KEY | ä½œæˆè€…ID |

**ç‰¹å¾´**:
- éšå±¤æ§‹é€ ã‚µãƒãƒ¼ãƒˆï¼ˆparent_id ã«ã‚ˆã‚‹è‡ªå·±å‚ç…§ï¼‰
- å®Ÿãƒ‡ãƒ¼ã‚¿: 13ã‚«ãƒ†ã‚´ãƒªä½œæˆæ¸ˆã¿

### 10. tags ãƒ†ãƒ¼ãƒ–ãƒ«
**ç›®çš„**: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ã‚¿ã‚°ä»˜ã‘æ©Ÿèƒ½

| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | åˆ¶ç´„ | èª¬æ˜ |
|---------|---------|-----|------|
| `id` | uuid | PRIMARY KEY | ã‚¿ã‚°ID |
| `name` | varchar | UNIQUE | ã‚¿ã‚°å |
| `slug` | varchar | UNIQUE | URLã‚¹ãƒ©ãƒƒã‚° |

### 11. prompt_tags ãƒ†ãƒ¼ãƒ–ãƒ«
**ç›®çš„**: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¨ã‚¿ã‚°ã®å¤šå¯¾å¤šé–¢ä¿‚

| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | èª¬æ˜ |
|---------|---------|------|
| `id` | uuid | é–¢ä¿‚ID |
| `prompt_id` | uuid | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆID |
| `tag_id` | uuid | ã‚¿ã‚°ID |

---

## ğŸ’ ã‚½ãƒ¼ã‚·ãƒ£ãƒ«æ©Ÿèƒ½

### 12. likes ãƒ†ãƒ¼ãƒ–ãƒ«
**ç›®çš„**: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¸ã®ã€Œã„ã„ã­ã€æ©Ÿèƒ½

| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | èª¬æ˜ |
|---------|---------|------|
| `id` | uuid | ã„ã„ã­ID |
| `user_id` | uuid | ã„ã„ã­ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ID |
| `prompt_id` | uuid | ã„ã„ã­ã•ã‚ŒãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆID |
| `created_at` | timestamptz | ã„ã„ã­æ—¥æ™‚ |

**ç‰¹å¾´**:
- å®Ÿãƒ‡ãƒ¼ã‚¿: 23ä»¶ã®ã„ã„ã­
- user_id + prompt_id ã§é‡è¤‡é˜²æ­¢

### 13. comments ãƒ†ãƒ¼ãƒ–ãƒ«
**ç›®çš„**: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¸ã®ã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½

| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | åˆ¶ç´„ | èª¬æ˜ |
|---------|---------|-----|------|
| `id` | uuid | PRIMARY KEY | ã‚³ãƒ¡ãƒ³ãƒˆID |
| `prompt_id` | uuid | NOT NULL | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆID |
| `user_id` | uuid | NOT NULL | ã‚³ãƒ¡ãƒ³ãƒˆè€…ID |
| `parent_id` | uuid | FOREIGN KEY | è¦ªã‚³ãƒ¡ãƒ³ãƒˆIDï¼ˆè¿”ä¿¡æ©Ÿèƒ½ï¼‰ |
| `content` | text | 1æ–‡å­—ä»¥ä¸Š | ã‚³ãƒ¡ãƒ³ãƒˆå†…å®¹ |
| `is_edited` | boolean | false | ç·¨é›†ãƒ•ãƒ©ã‚° |

**ç‰¹å¾´**:
- éšå±¤æ§‹é€ ã‚³ãƒ¡ãƒ³ãƒˆï¼ˆè¿”ä¿¡æ©Ÿèƒ½ï¼‰
- å®Ÿãƒ‡ãƒ¼ã‚¿: 9ä»¶ã®ã‚³ãƒ¡ãƒ³ãƒˆ

### 14. bookmarks ãƒ†ãƒ¼ãƒ–ãƒ«
**ç›®çš„**: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯æ©Ÿèƒ½

| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | èª¬æ˜ |
|---------|---------|------|
| `id` | uuid | ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ID |
| `user_id` | uuid | ãƒ¦ãƒ¼ã‚¶ãƒ¼ID |
| `prompt_id` | uuid | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆID |
| `created_at` | timestamptz | ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯æ—¥æ™‚ |

### 15. follows ãƒ†ãƒ¼ãƒ–ãƒ«
**ç›®çš„**: ãƒ¦ãƒ¼ã‚¶ãƒ¼é–“ã®ãƒ•ã‚©ãƒ­ãƒ¼æ©Ÿèƒ½

| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | èª¬æ˜ |
|---------|---------|------|
| `id` | uuid | ãƒ•ã‚©ãƒ­ãƒ¼é–¢ä¿‚ID |
| `follower_id` | uuid | ãƒ•ã‚©ãƒ­ãƒ¼ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ID |
| `following_id` | uuid | ãƒ•ã‚©ãƒ­ãƒ¼ã•ã‚Œã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ID |
| `created_at` | timestamptz | ãƒ•ã‚©ãƒ­ãƒ¼é–‹å§‹æ—¥æ™‚ |

**ç‰¹å¾´**:
- å®Ÿãƒ‡ãƒ¼ã‚¿: 11ä»¶ã®ãƒ•ã‚©ãƒ­ãƒ¼é–¢ä¿‚

### 16. notifications ãƒ†ãƒ¼ãƒ–ãƒ«
**ç›®çš„**: ã‚·ã‚¹ãƒ†ãƒ é€šçŸ¥ç®¡ç†

| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | èª¬æ˜ |
|---------|---------|------|
| `id` | uuid | é€šçŸ¥ID |
| `recipient_id` | uuid | å—ä¿¡è€…ID |
| `sender_id` | uuid | é€ä¿¡è€…IDï¼ˆã‚·ã‚¹ãƒ†ãƒ é€šçŸ¥ã®å ´åˆã¯nullï¼‰ |
| `type` | varchar | é€šçŸ¥ã‚¿ã‚¤ãƒ— |
| `content` | text | é€šçŸ¥å†…å®¹ |
| `resource_type` | varchar | é–¢é€£ãƒªã‚½ãƒ¼ã‚¹ã‚¿ã‚¤ãƒ— |
| `resource_id` | uuid | é–¢é€£ãƒªã‚½ãƒ¼ã‚¹ID |
| `is_read` | boolean | æ—¢èª­ãƒ•ãƒ©ã‚° |

---

## ğŸ’³ æ±ºæ¸ˆã‚·ã‚¹ãƒ†ãƒ 

### 17. payments ãƒ†ãƒ¼ãƒ–ãƒ«
**ç›®çš„**: æ±ºæ¸ˆãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†

| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | èª¬æ˜ |
|---------|---------|------|
| `id` | uuid | æ±ºæ¸ˆID |
| `user_id` | uuid | æ±ºæ¸ˆè€…ID |
| `amount` | bigint | æ±ºæ¸ˆé‡‘é¡ï¼ˆæœ€å°å˜ä½ï¼‰ |
| `currency` | text | é€šè²¨ |
| `intent_id` | text | Stripe PaymentIntent ID |
| `status` | text | æ±ºæ¸ˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |

### 18. purchases ãƒ†ãƒ¼ãƒ–ãƒ«
**ç›®çš„**: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè³¼å…¥å±¥æ­´

| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|---------|---------|-----------|------|
| `id` | uuid | - | è³¼å…¥ID |
| `buyer_id` | uuid | - | è³¼å…¥è€…ID |
| `prompt_id` | uuid | - | è³¼å…¥ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆID |
| `amount` | numeric | - | è³¼å…¥é‡‘é¡ |
| `currency` | text | 'JPY' | é€šè²¨ |
| `status` | varchar | 'completed' | è³¼å…¥ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
| `payment_id` | varchar | - | æ±ºæ¸ˆID |

### 19. subscriptions ãƒ†ãƒ¼ãƒ–ãƒ«
**ç›®çš„**: ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ç®¡ç†

| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|---------|---------|-----------|------|
| `id` | uuid | - | ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ID |
| `subscriber_id` | uuid | - | è³¼èª­è€…ID |
| `creator_id` | uuid | - | ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼ID |
| `status` | varchar | 'active' | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
| `price_tier_id` | uuid | - | ä¾¡æ ¼ãƒ†ã‚£ã‚¢ID |
| `current_period_start` | timestamptz | - | ç¾åœ¨æœŸé–“é–‹å§‹æ—¥ |
| `current_period_end` | timestamptz | - | ç¾åœ¨æœŸé–“çµ‚äº†æ—¥ |
| `cancel_at_period_end` | boolean | false | æœŸé–“çµ‚äº†æ™‚ã‚­ãƒ£ãƒ³ã‚»ãƒ« |
| `payment_method_id` | uuid | - | æ±ºæ¸ˆæ–¹æ³•ID |

### 20. payment_methods ãƒ†ãƒ¼ãƒ–ãƒ«
**ç›®çš„**: æ±ºæ¸ˆæ–¹æ³•ç®¡ç†

| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | èª¬æ˜ |
|---------|---------|------|
| `id` | uuid | æ±ºæ¸ˆæ–¹æ³•ID |
| `user_id` | uuid | ãƒ¦ãƒ¼ã‚¶ãƒ¼ID |
| `provider` | varchar | æ±ºæ¸ˆãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ |
| `token_id` | varchar | ãƒˆãƒ¼ã‚¯ãƒ³ID |
| `card_last4` | varchar | ã‚«ãƒ¼ãƒ‰ä¸‹4æ¡ |
| `card_brand` | varchar | ã‚«ãƒ¼ãƒ‰ãƒ–ãƒ©ãƒ³ãƒ‰ |
| `expiry_month` | integer | æœ‰åŠ¹æœŸé™æœˆ |
| `expiry_year` | integer | æœ‰åŠ¹æœŸé™å¹´ |
| `is_default` | boolean | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæ±ºæ¸ˆæ–¹æ³•ãƒ•ãƒ©ã‚° |

### 21. payouts ãƒ†ãƒ¼ãƒ–ãƒ«
**ç›®çš„**: ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼ã¸ã®æ”¯æ‰•ã„ç®¡ç†

| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|---------|---------|-----------|------|
| `id` | uuid | - | æ”¯æ‰•ã„ID |
| `user_id` | uuid | - | å—å–äººID |
| `amount` | numeric | - | æ”¯æ‰•ã„é‡‘é¡ |
| `status` | varchar | 'pending' | æ”¯æ‰•ã„ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
| `transaction_id` | varchar | - | ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ID |
| `payout_method` | varchar | - | æ”¯æ‰•ã„æ–¹æ³• |
| `notes` | text | - | å‚™è€ƒ |
| `completed_at` | timestamptz | - | å®Œäº†æ—¥æ™‚ |

---

## ğŸ“Š ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹ãƒ»ãƒ¬ãƒãƒ¼ãƒˆ

### 22. analytics_views ãƒ†ãƒ¼ãƒ–ãƒ«
**ç›®çš„**: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆé–²è¦§å±¥æ­´ã®è©³ç´°ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°

| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | èª¬æ˜ |
|---------|---------|------|
| `id` | uuid | é–²è¦§ID |
| `prompt_id` | uuid | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆID |
| `visitor_id` | text | è¨ªå•è€…è­˜åˆ¥å­ï¼ˆåŒ¿åå¯¾å¿œï¼‰ |
| `viewed_at` | timestamptz | é–²è¦§æ—¥æ™‚ |

**ç‰¹å¾´**:
- å®Ÿãƒ‡ãƒ¼ã‚¿: 85ä»¶ã®é–²è¦§å±¥æ­´
- åŒ¿åãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚‚è¿½è·¡å¯èƒ½

### 23. analytics_summary ãƒ†ãƒ¼ãƒ–ãƒ«
**ç›®çš„**: æ—¥æ¬¡ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹é›†è¨ˆ

| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|---------|---------|-----------|------|
| `id` | uuid | - | ã‚µãƒãƒªãƒ¼ID |
| `prompt_id` | uuid | - | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆID |
| `date` | date | - | é›†è¨ˆæ—¥ |
| `view_count` | integer | 0 | é–²è¦§æ•° |
| `unique_viewer_count` | integer | 0 | ãƒ¦ãƒ‹ãƒ¼ã‚¯é–²è¦§è€…æ•° |
| `like_count` | integer | 0 | ã„ã„ã­æ•° |
| `comment_count` | integer | 0 | ã‚³ãƒ¡ãƒ³ãƒˆæ•° |
| `bookmark_count` | integer | 0 | ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯æ•° |
| `purchase_count` | integer | 0 | è³¼å…¥æ•° |

### 24. recently_viewed_prompts ãƒ†ãƒ¼ãƒ–ãƒ«
**ç›®çš„**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœ€è¿‘é–²è¦§ã—ãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå±¥æ­´

| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | èª¬æ˜ |
|---------|---------|------|
| `id` | uuid | å±¥æ­´ID |
| `user_id` | uuid | ãƒ¦ãƒ¼ã‚¶ãƒ¼ID |
| `prompt_id` | uuid | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆID |
| `viewed_at` | timestamptz | é–²è¦§æ—¥æ™‚ |

**ç‰¹å¾´**:
- å®Ÿãƒ‡ãƒ¼ã‚¿: 101ä»¶ã®é–²è¦§å±¥æ­´
- ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã®åŸºç›¤

---

## ğŸ›¡ï¸ é‹å–¶ãƒ»ç®¡ç†æ©Ÿèƒ½

### 25. reports ãƒ†ãƒ¼ãƒ–ãƒ«
**ç›®çš„**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®å ±å‘Šãƒ»é€šå ±ç®¡ç†

| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | åˆ¶ç´„ | èª¬æ˜ |
|---------|---------|-----|------|
| `id` | uuid | PRIMARY KEY | å ±å‘ŠID |
| `target_id` | uuid | NOT NULL | å ±å‘Šå¯¾è±¡ID |
| `target_type` | text | ['comment', 'prompt'] | å ±å‘Šå¯¾è±¡ã‚¿ã‚¤ãƒ— |
| `prompt_id` | uuid | NOT NULL | é–¢é€£ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆID |
| `reporter_id` | uuid | NOT NULL | å ±å‘Šè€…ID |
| `reason` | text | åˆ¶ç´„ã‚ã‚Š | å ±å‘Šç†ç”± |
| `details` | text | | è©³ç´°èª¬æ˜ |
| `status` | text | 'pending' | å‡¦ç†ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |

**å ±å‘Šç†ç”±ã®é¸æŠè‚¢**:
- `inappropriate`: ä¸é©åˆ‡ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„
- `spam`: ã‚¹ãƒ‘ãƒ 
- `harassment`: ãƒãƒ©ã‚¹ãƒ¡ãƒ³ãƒˆ
- `misinformation`: èª¤æƒ…å ±
- `other`: ãã®ä»–

### 26. feedback ãƒ†ãƒ¼ãƒ–ãƒ«
**ç›®çš„**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒ»æ©Ÿèƒ½è¦æœ›ç®¡ç†

| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | èª¬æ˜ |
|---------|---------|------|
| `id` | uuid | ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ID |
| `feedback_type` | text | ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚¿ã‚¤ãƒ— |
| `email` | text | é€£çµ¡å…ˆãƒ¡ãƒ¼ãƒ«ï¼ˆä»»æ„ï¼‰ |
| `message` | text | ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯å†…å®¹ |
| `is_read` | boolean | ç®¡ç†è€…ç¢ºèªãƒ•ãƒ©ã‚° |

**ç‰¹å¾´**:
- å®Ÿãƒ‡ãƒ¼ã‚¿: 5ä»¶ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯

### 27. contacts ãƒ†ãƒ¼ãƒ–ãƒ«
**ç›®çš„**: ãŠå•ã„åˆã‚ã›ç®¡ç†

| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | èª¬æ˜ |
|---------|---------|------|
| `id` | uuid | ãŠå•ã„åˆã‚ã›ID |
| `name` | text | æ°å |
| `email` | text | ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ |
| `subject` | text | ä»¶å |
| `message` | text | ãŠå•ã„åˆã‚ã›å†…å®¹ |
| `is_read` | boolean | ç¢ºèªæ¸ˆã¿ãƒ•ãƒ©ã‚° |

**ç‰¹å¾´**:
- å®Ÿãƒ‡ãƒ¼ã‚¿: 4ä»¶ã®ãŠå•ã„åˆã‚ã›

### 28. announcements ãƒ†ãƒ¼ãƒ–ãƒ«
**ç›®çš„**: ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ãƒ»ãŠçŸ¥ã‚‰ã›ç®¡ç†

| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|---------|---------|-----------|------|
| `id` | uuid | - | ãŠçŸ¥ã‚‰ã›ID |
| `title` | text | - | ã‚¿ã‚¤ãƒˆãƒ« |
| `content` | text | - | ãŠçŸ¥ã‚‰ã›å†…å®¹ |
| `icon` | text | - | ã‚¢ã‚¤ã‚³ãƒ³ |
| `icon_color` | text | - | ã‚¢ã‚¤ã‚³ãƒ³ã‚«ãƒ©ãƒ¼ |
| `start_date` | timestamptz | now() | è¡¨ç¤ºé–‹å§‹æ—¥ |
| `end_date` | timestamptz | - | è¡¨ç¤ºçµ‚äº†æ—¥ |
| `is_active` | boolean | true | ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ•ãƒ©ã‚° |

### 29. announcement_reads ãƒ†ãƒ¼ãƒ–ãƒ«
**ç›®çš„**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã”ã¨ã®ãŠçŸ¥ã‚‰ã›æ—¢èª­ç®¡ç†

| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | èª¬æ˜ |
|---------|---------|------|
| `id` | uuid | æ—¢èª­ID |
| `user_id` | uuid | ãƒ¦ãƒ¼ã‚¶ãƒ¼ID |
| `announcement_id` | uuid | ãŠçŸ¥ã‚‰ã›ID |
| `created_at` | timestamptz | æ—¢èª­æ—¥æ™‚ |

**ç‰¹å¾´**:
- è¤‡åˆãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼ï¼ˆuser_id + announcement_idï¼‰
- å®Ÿãƒ‡ãƒ¼ã‚¿: 35ä»¶ã®æ—¢èª­å±¥æ­´

---

## ğŸ† ã‚²ãƒ¼ãƒŸãƒ•ã‚£ã‚±ãƒ¼ã‚·ãƒ§ãƒ³

### 30. badges ãƒ†ãƒ¼ãƒ–ãƒ«
**ç›®çš„**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒãƒƒã‚¸ã‚·ã‚¹ãƒ†ãƒ 

| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | åˆ¶ç´„ | èª¬æ˜ |
|---------|---------|-----|------|
| `id` | uuid | PRIMARY KEY | ãƒãƒƒã‚¸ID |
| `name` | varchar | UNIQUE | ãƒãƒƒã‚¸å |
| `description` | text | | ãƒãƒƒã‚¸èª¬æ˜ |
| `icon` | varchar | | ã‚¢ã‚¤ã‚³ãƒ³ |
| `requirements` | text | | ç²å¾—æ¡ä»¶ |

### 31. user_badges ãƒ†ãƒ¼ãƒ–ãƒ«
**ç›®çš„**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒãƒƒã‚¸ç²å¾—å±¥æ­´

| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | èª¬æ˜ |
|---------|---------|------|
| `id` | uuid | ç²å¾—ID |
| `user_id` | uuid | ãƒ¦ãƒ¼ã‚¶ãƒ¼ID |
| `badge_id` | uuid | ãƒãƒƒã‚¸ID |
| `awarded_at` | timestamptz | ç²å¾—æ—¥æ™‚ |

---

## ğŸ“ˆ ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ãƒ»èª²é‡‘

### 32. price_tiers ãƒ†ãƒ¼ãƒ–ãƒ«
**ç›®çš„**: ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼å‘ã‘ä¾¡æ ¼ãƒ—ãƒ©ãƒ³ç®¡ç†

| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | èª¬æ˜ |
|---------|---------|-----------|------|
| `id` | uuid | - | ãƒ—ãƒ©ãƒ³ID |
| `creator_id` | uuid | - | ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼ID |
| `name` | varchar | - | ãƒ—ãƒ©ãƒ³å |
| `description` | text | - | ãƒ—ãƒ©ãƒ³èª¬æ˜ |
| `price` | numeric | - | ä¾¡æ ¼ |
| `billing_interval` | varchar | 'month' | èª²é‡‘é–“éš” |
| `is_active` | boolean | true | ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ•ãƒ©ã‚° |
| `benefits` | jsonb | - | ç‰¹å…¸å†…å®¹ï¼ˆJSONï¼‰ |

### 33. payout_accounts ãƒ†ãƒ¼ãƒ–ãƒ«
**ç›®çš„**: ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼ã®æŒ¯è¾¼å…ˆå£åº§ç®¡ç†

| ã‚«ãƒ©ãƒ å | ãƒ‡ãƒ¼ã‚¿å‹ | èª¬æ˜ |
|---------|---------|------|
| `id` | uuid | å£åº§ID |
| `user_id` | uuid | ãƒ¦ãƒ¼ã‚¶ãƒ¼ID |
| `account_type` | varchar | å£åº§ç¨®åˆ¥ |
| `account_holder` | varchar | å£åº§åç¾© |
| `account_details` | jsonb | å£åº§è©³ç´°ï¼ˆæš—å·åŒ–å¯¾è±¡ï¼‰ |
| `is_default` | boolean | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå£åº§ãƒ•ãƒ©ã‚° |
| `is_verified` | boolean | ç¢ºèªæ¸ˆã¿ãƒ•ãƒ©ã‚° |

---

## ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»ç›£æŸ»

### Row Level Security (RLS)
**é©ç”¨ãƒ†ãƒ¼ãƒ–ãƒ«**: å…¨publicã‚¹ã‚­ãƒ¼ãƒãƒ†ãƒ¼ãƒ–ãƒ«
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è‡ªåˆ†ã®ãƒ‡ãƒ¼ã‚¿ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
- ç®¡ç†è€…æ¨©é™ã«ã‚ˆã‚‹ä¾‹å¤–è¨­å®š

### ç›£æŸ»ãƒ­ã‚°
**auth.audit_log_entries**: èªè¨¼é–¢é€£ã®å…¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¨˜éŒ²
- å®Ÿãƒ‡ãƒ¼ã‚¿: 19,527ä»¶ã®ãƒ­ã‚°ã‚¨ãƒ³ãƒˆãƒª

### ãƒ‡ãƒ¼ã‚¿æš—å·åŒ–
- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰: bcryptæš—å·åŒ–
- å€‹äººæƒ…å ±: é©åˆ‡ãªæš—å·åŒ–å®Ÿè£…
- æ±ºæ¸ˆæƒ…å ±: Stripeå´ã§ç®¡ç†

---

## ğŸ“Š ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹çµ±è¨ˆ

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä½¿ç”¨é‡

| ãƒ†ãƒ¼ãƒ–ãƒ«å | ã‚µã‚¤ã‚º | å®Ÿãƒ‡ãƒ¼ã‚¿æ•° | ç‰¹è¨˜äº‹é … |
|-----------|------|----------|---------|
| auth.audit_log_entries | 6,224 kB | 19,527 | æœ€å¤§ãƒ†ãƒ¼ãƒ–ãƒ« |
| auth.refresh_tokens | 1,248 kB | 349 | ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚»ãƒƒã‚·ãƒ§ãƒ³ |
| prompts | 360 kB | 20 | ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ |
| analytics_views | 152 kB | 85 | ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ãƒ‡ãƒ¼ã‚¿ |
| likes | 104 kB | 23 | ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆ |

### ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æˆ¦ç•¥
- ãƒ—ãƒ©ã‚¤ãƒãƒªã‚­ãƒ¼: UUIDä½¿ç”¨
- å¤–éƒ¨ã‚­ãƒ¼: è‡ªå‹•ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
- æ¤œç´¢æœ€é©åŒ–: title, content ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
- æ™‚ç³»åˆ—ã‚¯ã‚¨ãƒª: created_at ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹

---

## ğŸš€ ã‚·ã‚¹ãƒ†ãƒ é‹ç”¨è€ƒæ…®äº‹é …

### ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£
1. **èª­ã¿å–ã‚Šæœ€é©åŒ–**: ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥
2. **æ›¸ãè¾¼ã¿åˆ†æ•£**: ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ‹ãƒ³ã‚°æ¤œè¨
3. **ç”»åƒç®¡ç†**: CDNé€£æº

### ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æˆ¦ç•¥
1. **æ—¥æ¬¡è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—**: Supabaseæ¨™æº–æ©Ÿèƒ½
2. **Point-in-time Recovery**: 7æ—¥é–“ä¿æŒ
3. **ç½å®³å¾©æ—§**: ãƒãƒ«ãƒãƒªãƒ¼ã‚¸ãƒ§ãƒ³æ¤œè¨

### ç›£è¦–ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆ
1. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–**: ã‚¹ãƒ­ãƒ¼ã‚¯ã‚¨ãƒªæ¤œå‡º
2. **å®¹é‡ç›£è¦–**: ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ä½¿ç”¨é‡
3. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£è¦–**: ç•°å¸¸ã‚¢ã‚¯ã‚»ã‚¹æ¤œå‡º

---

## ğŸ“‹ ä»Šå¾Œã®æ‹¡å¼µè¨ˆç”»

### æ©Ÿèƒ½æ‹¡å¼µ
1. **AIçµ±åˆ**: ã‚ˆã‚Šé«˜åº¦ãªãƒ¬ã‚³ãƒ¡ãƒ³ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
2. **å›½éš›åŒ–**: å¤šè¨€èªå¯¾å¿œ
3. **APIå…¬é–‹**: ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£é€£æº
4. **ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒª**: ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¢ãƒ—ãƒªå¯¾å¿œ

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ‹¡å¼µ
1. **å…¨æ–‡æ¤œç´¢**: Elasticsearché€£æº
2. **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½**: WebSocketå¯¾å¿œ
3. **ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹å¼·åŒ–**: BigQueryé€£æº

---

## ğŸ’¡ ã¾ã¨ã‚

**Prompty**ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆã¯ã€ç¾ä»£çš„ãªSaaSãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã«å¿…è¦ãªæ©Ÿèƒ½ã‚’åŒ…æ‹¬çš„ã«ã‚«ãƒãƒ¼ã—ã¦ã„ã¾ã™ï¼š

### ğŸ¯ ä¸»è¦ãªå¼·ã¿
1. **åŒ…æ‹¬çš„ãªæ©Ÿèƒ½ã‚»ãƒƒãƒˆ**: èªè¨¼ã‹ã‚‰ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†ã€æ±ºæ¸ˆã¾ã§å®Œå‚™
2. **ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ãªè¨­è¨ˆ**: ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹å¯¾å¿œå¯èƒ½ãªæ§‹é€ 
3. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆ**: RLSã«ã‚ˆã‚‹å …ç‰¢ãªã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
4. **ãƒ‡ãƒ¼ã‚¿ãƒ‰ãƒªãƒ–ãƒ³**: è©³ç´°ãªã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹æ©Ÿèƒ½
5. **æŸ”è»Ÿæ€§**: JSONBã«ã‚ˆã‚‹æ‹¡å¼µå¯èƒ½ãªè¨­å®šç®¡ç†

### ğŸ”§ æŠ€è¡“çš„ãƒã‚¤ãƒ©ã‚¤ãƒˆ
- **PostgreSQL 15.8.1** ã®æœ€æ–°æ©Ÿèƒ½æ´»ç”¨
- **Supabase** ã«ã‚ˆã‚‹èªè¨¼ãƒ»ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½
- **Stripe** å®Œå…¨çµ±åˆã«ã‚ˆã‚‹æ±ºæ¸ˆã‚·ã‚¹ãƒ†ãƒ 
- **RLS** ã«ã‚ˆã‚‹å¤šå±¤ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- **JSONB** ã«ã‚ˆã‚‹æŸ”è»Ÿãªãƒ‡ãƒ¼ã‚¿æ§‹é€ 

ã“ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆã«ã‚ˆã‚Šã€**Prompty**ã¯é«˜å“è³ªãªAIãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå…±æœ‰ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã¨ã—ã¦ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ä¾¡å€¤ã‚’æä¾›ã—ç¶šã‘ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚ 